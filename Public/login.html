<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Smart Traslados</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="apple-touch-icon" href="/file_000000008fd0720eb71af76359ccb359.png">
<link rel="manifest" href="/manifest.json">

<style>
  body { margin:0; font-family: Arial, sans-serif; background:#000; color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; }
  .logo { width:120px; margin-bottom:20px; }
  .login-card { background:#111; padding:25px; border-radius:20px; border:1px solid #333; width:85%; max-width:350px; text-align:center; }
  h1 { font-size:24px; color:#00c853; margin-bottom:20px; }
  
  input { width:100%; padding:18px; border-radius:12px; border:1px solid #444; background:#222; color:#fff; font-size:20px; margin-bottom:20px; box-sizing:border-box; text-align:center; }
  
  .btn-choice { width:100%; padding:20px; border-radius:12px; border:none; font-weight:bold; font-size:18px; cursor:pointer; margin-bottom:15px; display:flex; align-items:center; justify-content:center; gap:10px; }
  .btn-pasajero { background:#00c853; color:#000; }
  .btn-chofer { background:#333; color:#fff; border: 1px solid #555; }
  
  /* Cartel de ayuda para iPhone */
  #ios-prompt {
    display: none; position: fixed; bottom: 20px; left: 15px; right: 15px; 
    background: #1a1a1a; border: 2px solid #00c853; padding: 20px; border-radius: 20px; text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 999;
  }
</style>
</head>
<body>

  <img src="/file_000000008fd0720eb71af76359ccb359.png" class="logo">

  <div class="login-card">
    <h1>Bienvenido</h1>
    <input type="tel" id="telefono" placeholder="Tu n칰mero de celular">
    
    <button class="btn-choice btn-pasajero" onclick="ingresar('pasajero')">
        <span>游늸</span> BUSCAR TRASLADO
    </button>
    
    <button class="btn-choice btn-chofer" onclick="ingresar('chofer')">
        <span>游뚰</span> SOY CHOFER
    </button>
  </div>

  <div id="ios-prompt">
    <div style="font-size: 14px; color:#fff; line-height: 1.4;">
        <strong>Para usar como App:</strong><br>
        Toc치 el bot칩n compartir <img src="https://img.icons8.com/material-outlined/20/ffffff/external-link.png" style="vertical-align:middle;"/> y luego eleg칤 <strong>"Agregar al Inicio"</strong>.
    </div>
  </div>

<script>
// 1. AUTO-LOGIN: Si ya eligi칩 una vez, lo mandamos directo a su mapa
const sesion = JSON.parse(localStorage.getItem("sesion") || "{}");
if(sesion.telefono && sesion.tipo){
    window.location.href = (sesion.tipo === "chofer") ? "/chofer/index.html" : "/pasajero/index.html";
}

function ingresar(tipoElegido) {
    const tel = document.getElementById("telefono").value.trim();
    if (tel.length < 8) {
        alert("Por favor, ingres치 un n칰mero de tel칠fono v치lido.");
        return;
    }

    // Guardamos la sesi칩n con el tipo que eligi칩
    const datosSesion = { 
        telefono: tel, 
        tipo: tipoElegido, 
        nombre: sesion.nombre || "" 
    };
    localStorage.setItem("sesion", JSON.stringify(datosSesion));

    // Redirecci칩n inmediata seg칰n el bot칩n
    if(tipoElegido === 'chofer') {
        window.location.href = "/chofer/index.html";
    } else {
        window.location.href = "/pasajero/index.html";
    }
}

// 2. DETECCI칍N IPHONE: Muestra el cartel solo si es iPhone y no est치 instalada
const isIos = () => /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());
const isStandalone = () => ('standalone' in window.navigator) && (window.navigator.standalone);

if (isIos() && !isStandalone()) {
  document.getElementById('ios-prompt').style.display = 'block';
}
</script>
</body>
</html>
